<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>bash declare integer | temptemp3.github.io</title>

<link rel="canonical" href="https://temptemp3.github.io/bash-declare-integer.html" />
<link rel="stylesheet" href="css/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<style>
body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-104620931-1', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body class="w3-light-grey">
<div class="w3-content" style="max-width:1400px">
<!-- Header -->
<header class="w3-container w3-center w3-padding-32"> 
<h1><b><a style="text-decoration:none;" href="https://temptemp3.github.io/">tempt2<sup>3</sup></a></b></h1>
<p>Welcome to the blog of <span class="w3-tag"><a style="text-decoration:none;" href="https://github.com/temptemp3">temptemp3</a></span></p>
</header>
<!-- begin Grid -->
<div class="w3-row">
<div class="w3-col l8 s12">
<div class="w3-card-4 w3-margin w3-white">
<div class="w3-container">
<h1>bash declare integer</h1>

<!--
[bash declare integer](bash-declare-integer.html)
-->

<hr />

<p>In <a href="bash-using-declare.html#bash-declare-integer">bash using declare</a> we covered all the uses for the <a href="bash.html">bash</a> builtin command declare. Here we focus on the usage of declare for integers, covering declaring integers in greater detail.</p>

<h2>Basic usage</h2>

<p>Let's skip to good part! <br />
Here is how to declare a integer variable in bash. Note that <span class="w3-codespan">int</span> is not a keyword for integer. That is the job of the <span class="w3-codespan">-i</span> option to the builtin declare.</p>

<pre><code>declare -i int      # int is an integer
int=5               # int=$(( 5 ))=5
int+=1              # int=$(( int + 1 ))=6
int+=int+1          # int=$(( int + int + 1 ))=13
</code></pre>

<p>Now look at what happens without the integer attribute.</p>

<pre><code>int=5               # int=5
int+=1              # int=${int}1=51
int+=int+1          # int=${int}+int+1=51int+1
</code></pre>

<p>Now you see what happens if you forget to declare a variable as an integer. Not something that you want running loose in your program.</p>

<h3>breakdown</h3>

<p><span class="w3-codespan">declare -i int</span></p>

<p>We say that if there is a variable named int, it now has the integer attribute set. If the variable named in the declare command is not set yet, then the attribute is applied to future variable unless <span class="w3-codespan">unset</span>. Using <span class="w3-codespan">local</span> instead of <span class="w3-codespan">declare</span>, causes the attribute to only be applied in subsequent assignments in the local scope.</p>

<p><span class="w3-codespan">int=5</span></p>

<p>Depending on whether the variable has the integer attribute this sets the value of int to the string 5 or arithmetic expansion of 5. In the case of 5, the result yields 5 for both cases.</p>

<p><span class="w3-codespan">int+=1</span></p>

<p>Should increment int if integer attribute set.</p>

<p><span class="w3-codespan">int+=int+1</span></p>

<p>Should double int and increment if integer attribute set.</p>

<h2>Introduction</h2>

<p>Bash variables are untyped. That is, if a value is assigned to a variable without declaring variable attributes, the value is treated as that of any other variable, a string. Declaring a variable with the integer attribute affects assignment and treatment in arithmetic expressions.</p>

<h2>Definitions</h2>

<p>Definition that may or may not be used from hereon.</p>

<h3>Integer variable</h3>

<p>We define an integer variable in bash as a variable with the integer attribute set. The question we ask here is, "Is it valid to declare a variable with the integer attribute in combination with another attribute?" This may be expanded later.</p>

<h3>Pure integer variable</h3>

<p>We define a pure integer variable in bash as a variable with only the integer attribute set.</p>

<h2>Why declare integers in bash?</h2>

<p>In order to understand how an why integers are declared in bash, it is helpful to look at behavior with and without using integer variables.</p>

<pre><code>#!/bin/bash
## test-bash-declare-integer-1
## - fun with integers attributes
## version 0.0.1 - initial
##################################################
test-bash-declare-integer-1() {
  ## setup
  local lonely_integer      # one int is fine
  local i           # for ease of use
  declare -n i=lonely_integer   # declare attributes
  ## (1) do something wrong with integers
  i=asdf            # (1) asdf as i is asdf
  echo ${i}         # (2) asdf
  ## (2) what if we give it the integer attribute?
  declare -i lonely_integer # (1) declare integer
  i=asdf            # (2) asdf as i is 0
  echo ${i}         # (3) 0
  ## (3) what happened?
  declare +i lonely_integer # (1) revert back
  i=$(( ${asdf} ))      # (2) what happens in (2) under (1) conditions
  echo ${i}         # (3) 0
  ## (4) proof: part i (without integer attribute)
  asdf=1            # assignment for proof
  i=$(( ${asdf} ))      # same as (3.2)
  echo ${i}         # 1
  ## (5) proof: part ii (with integer attribute)
  declare -i lonely_integer # same as (2.1)
  i=asdf            #  asdf as i is 1
  echo ${i}         # 1
}
##################################################
if [ ${#} -eq 0 ] 
then
 true
else
 exit 1 # wrong args
fi
##################################################
test-bash-declare-integer-1
##################################################
## generated by create-stub2.sh v0.1.1
## on Sun, 03 Feb 2019 17:36:53 +0900
## see &lt;https://github.com/temptemp3/sh2&gt;
##################################################
</code></pre>

<p>You see that adding the integer attribute forces arithmetic expressions to be evaluated on assignment. </p>

<h2>Questions</h2>

<h3>How do I compare two integers?</h3>

<p>Arithmetic binary operators can be used to <a href="bash-conditionals.html#arithmetic">compare integers in bash</a> in the form <span class="w3-codespan">arg1 OP arg2</span>. For example, we may test if two integers are not equal as follows.</p>

<pre><code>test ! ${a} -eq ${b} # a != b
</code></pre>

<h3>How do I declare an integer bash?</h3>

<p>Declare integer variables using the <span class="w3-codespan">-i</span> option.</p>

<pre><code>declare -i myint
</code></pre>

<h3>How do I declare a local integer in bash?</h3>

<p>Declare integer variables with local bindings using declare in conjunction with the local. In shortest form, the operation may be performed in a single statement consisting of local, the integer option flag, and variable name.</p>

<pre><code>local myint
declare -i myint
</code></pre>

<p>See <a href="bash-using-local.html#declare-local-integer">declaring a local integer</a></p>

<!-- log was here -->

<hr />
<!--.w3-container--></div>
<!--.w3-card--></div>
<!--.w3-col--></div>
<div class="w3-col l4">
<div class="w3-card-2 w3-margin w3-margin-top w3-white">
<div class="w3-container">
<div class="w3-bar w3-white">
<a href="index.html" class="w3-bar-item w3-button w3-mobile">index</a>
<a href="bash.html" class="w3-bar-item w3-button w3-mobile">bash</a>
<a href="bash-conditionals.html" class="w3-bar-item w3-button w3-mobile">bash-conditionals</a>
<a href="bash-declare-integer.html" class="w3-bar-item w3-button w3-mobile">bash-declare-integer</a>
</div> 
<!--.w3-container--></div>
<!--.w3-card--></div>
<!--.w3-col--></div>
<!--.w3-row--></div>
<!-- Grid end -->
<!-- .w3-content --></div>
<footer class="w3-container w3-dark-grey w3-padding-32 w3-margin-top">
<p>&copy; 2017-2019 <a href="https://temptemp3.github.io/">temptemp3.github.io</a><br>
Built with <a href="https://github.com/temptemp3/sh2/blob/180702/u2.sh">u2.sh</a> Default theme and Vim</p>
<!--button class="w3-button w3-black w3-disabled w3-padding-large w3-margin-bottom">Previous</button>
<button class="w3-button w3-black w3-padding-large w3-margin-bottom">Next</button-->
<!--mute in global fields -->
<!--p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank" rel="nofollow">w3.css</a></p-->
</footer>
</body>
</html>
