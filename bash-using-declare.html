<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>bash using declare | temptemp3.github.io</title>

<link rel="canonical" href="https://temptemp3.github.io/bash-using-declare.html" />
<link rel="stylesheet" href="css/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<style>
body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-104620931-1', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body class="w3-light-grey">
<div class="w3-content" style="max-width:1400px">
<!-- Header -->
<header class="w3-container w3-center w3-padding-32"> 
<h1><b><a style="text-decoration:none;" href="https://temptemp3.github.io/">tempt2<sup>3</sup></a></b></h1>
<p>Welcome to the blog of <span class="w3-tag"><a style="text-decoration:none;" href="https://github.com/temptemp3">temptemp3</a></span></p>
</header>
<!-- begin Grid -->
<div class="w3-row">
<div class="w3-col l8 s12">
<div class="w3-card-4 w3-margin w3-white">
<div class="w3-container">
<h1>bash using declare</h1>

<!--
[bash using declare](bash-using-declare.html)
-->

<p>One thing you learn later in bash is to use certain builtin commands. Declare in bash is no exception. Here we cover how to use the builtin declare to modify variable attributes allowing creation of arrays, listing of defined functions, integers, and much more.</p>

<hr />

<pre><code>bash -c "help declare"
declare: declare [-aAfFgilnrtux] [-p] [name[=value] ...]
    Set variable values and attributes.

    Declare variables and give them attributes.  If no NAMEs are given,
    display the attributes and values of all variables.

    Options:
      -f        restrict action or display to function names and definitions
      -F        restrict display to function names only (plus line number and
                source file when debugging)
      -g        create global variables when used in a shell function; otherwise
                ignored
      -p        display the attributes and value of each NAME

    Options which set attributes:
      -a        to make NAMEs indexed arrays (if supported)
      -A        to make NAMEs associative arrays (if supported)
      -i        to make NAMEs have the `integer' attribute
      -l        to convert NAMEs to lower case on assignment
      -n        make NAME a reference to the variable named by its value
      -r        to make NAMEs readonly
      -t        to make NAMEs have the `trace' attribute
      -u        to convert NAMEs to upper case on assignment
      -x        to make NAMEs export

    Using `+' instead of `-' turns off the given attribute.

    Variables with the integer attribute have arithmetic evaluation (see
    the `let' command) performed when the variable is assigned a value.

    When used in a function, `declare' makes NAMEs local, as with the `local'
    command.  The `-g' option suppresses this behavior.

    Exit Status:
    Returns success unless an invalid option is supplied or a variable
    assignment error occurs.
</code></pre>

<p>The <u>bash builtin</u> command <u>declare</u> provides access to variable attributes within the scope of a bash program. </p>

<p>Here is a list of ways declare may be used. </p>

<h2>to declare an array</h2>

<p>declaring arrays in bash</p>

<h3>indexed arrays</h3>

<p><code class="w3-codespan">declare -a</code> in bash</p>

<p>The <code class="w3-codespan">-a</code> option adds the indexed array attribute to the variable name provided to the declare command.</p>

<pre><code>#
# declare an array
#
declare -a VARIABLE 
</code></pre>

<h3>associative arrays, hashes, map, dictionary, or collection of (key,value) pairs</h3>

<p><code class="w3-codespan">declare -A</code> in bash</p>

<p>The <code class="w3-codespan">-A</code> option adds the associative array attribute to the variable name provided to the declare command.</p>

<p>Indexed array variable example</p>

<pre><code>#
# declare an associative arrays
#
declare -A VARIABLE 
</code></pre>

<h4>associative arrays in the wild</h4>

<p>Associative array variable example using array to store document meta name value pairs</p>

<pre><code>declare -A document
...
get-document-meta() {
 local document_meta
 local document_meta_name
 local document_meta_value
 document_meta=$(
  cat ${file} \
  | grep \
  -e '<[!]--\s\+[a-z-]\+:[a-z,]\+\s\+-->' --only-matching \
  | sed -e 's/\(.*\)/\1/' \
  -e 's/<!--\s\+//g' \
  -e 's/\s\+-->//g' 
 )
 test ! "${document_meta}" || {
  document_meta_name=$( 
   echo "${document_meta}" | cut -f1 -d:
  )
  document_meta_value=$(
   echo "${document_meta}" | cut -f2 -d:
  )
  document["${document_meta_name}"]="${document_meta_value}" 
 }
}
</code></pre>

<p>source: <a href="https://github.com/temptemp3/sh2-u2-theme-default/blob/master/include.sh">sh2-u2-theme-default/include.sh</a></p>

<h2>to declare a variable to be a reference to another variable</h2>

<p><code class="w3-codespan">declare -n</code> in bash</p>

<p>The <code class="w3-codespan">-n</code> option adds the nameref attribute to the name provided to the declare command.</p>

<p>Nameref variable example</p>

<pre><code>#
# declare nameref
#
declare -n VARIABLE 
</code></pre>

<h2>to dump variables</h2>

<p>Using declare by itself may be used to dump variable names and functions along with their value and definitions, respectfully.</p>

<p>Declare command example</p>

<pre><code>declare
</code></pre>

<h2>to test a function</h2>

<p>The declare command may be used to test if a function has been declared and is usable within the scope of the bash program.</p>

<p>Function test examples</p>

<pre><code>#
# return name and definition of function if declared
#
declare -f ${function_name} 
</code></pre>

<pre><code>#
# returns name only of function if declared
#
declare -F ${function_name} 
</code></pre>

<h2>to give a variable attributes</h2>

<p>Attribute variable example</p>

<pre><code>#
# give variable attribute x
#
declare -X VARIABLE 
</code></pre>

<h2>to remove variable attributes</h2>

<p>Use '+' instead of '-'.</p>

<p>Variable attribute removal example</p>

<pre><code>#
# remove attribute x from variable
#
declare +X VARIABLE 
</code></pre>

<p>Attribute removal behavior may vary of array and readonly variables.</p>

<h2>to list attributes</h2>

<p>List all variables in addition to their attributes.</p>

<p><code class="w3-codespan">declare -p</code> in bash</p>

<p>Print variables and attributes in bash using the <code class="w3-codespan">-p</code> option displays the attributes of the name provided to the declare command. Variables may include an assigned value.</p>

<pre><code>declare -p 
</code></pre>

<h2>to declare a variable without attributes</h2>

<p><code class="w3-codespan">declare</code> in bash without attributes</p>

<p>The declare command may be used without specifying attributes resulting in an assignment.</p>

<p>Declare variable example</p>

<pre><code>#
# declare variable without attribute
#
declare VARIABLE[=VALUE] 
</code></pre>

<p>equvalent to</p>

<pre><code>#
# declare variable 
#
VARIABLE=[VALUE] 
</code></pre>

<h2>to declare a readonly variable</h2>

<p><code class="w3-codespan">declare -r</code> in bash</p>

<p>Declare read-only variable in bash using the <code class="w3-codespan">-r</code> option adds the read-only attribute to the variable name provided to the declare command such that the variable may not be reassigned.</p>

<p>Read-only variable example</p>

<pre><code>#
# declare readonly
#
declare -r VARIABLE 
</code></pre>

<p><a name="bash-declare-integer"></a></p>

<h2>to declare a variable to be treated as an integer</h2>

<p><code class="w3-codespan">declare -i</code> in bash</p>

<p>Declare integer variables in bash using the <code class="w3-codespan">-i</code> option adds the integer attribute to the variable name provided to the declare command such that the variable is to treated as an integer.</p>

<p>Integer variable example</p>

<pre><code>#
# declare integer
#
declare -i VARIABLE 
</code></pre>

<p>See also</p>

<ul>
<li><a href="bash-declare-integer.html">bash declare integer</a></li>
</ul>

<h2>to declare a variable to be case-insensitive, or lowercase</h2>

<p><code class="w3-codespan">declare -l</code> in bash</p>

<p>Declare lowercase variables in bash using the <code class="w3-codespan">-l</code> option adds the lowercase attribute to the variable name provided to the declare command such that any value is converted to lowercase on assignment.</p>

<p>Lower variable example</p>

<pre><code>#
# declare lower
#
declare -l VARIABLE 
</code></pre>

<h2>to declare a variable to be uppercase</h2>

<p><code class="w3-codespan">declare -u</code> in bash</p>

<p>Declare uppercase variables in bash using the <code class="w3-codespan">-u</code> option adds the uppercase attribute to the variable name provided to the declare command such that any value is converted to uppercase on assignment.</p>

<p>Upper variable example</p>

<pre><code>#
# declare upper
#
declare -u VARIABLE 
</code></pre>

<h2>to export variables or functions to subshells</h2>

<p><code class="w3-codespan">declare -x</code> in bash</p>

<p>Export variables and functions in bash using the <code class="w3-codespan">-x</code> option adds the export attribute to the variable or function name provided to the declare command.</p>

<h3>export variable to subshells</h3>

<p>Export variable example</p>

<pre><code>#
# declare export variable
#
declare -x VARIABLE 
</code></pre>

<h3>export function to subshells</h3>

<p>Export function example</p>

<pre><code>#
# declare export function
#
declare -xf FUNCTION
</code></pre>

<h2>commands similar to declare</h2>

<p>In addition to declare, the following commands allow modification of bash variable attributes.</p>

<h3>local</h3>

<p>Same as declare but with local bindings for functions</p>

<p>See <a href="bash-using-local.html">bash using local</a></p>

<h3>typeset</h3>

<p>Synonym for declare. That can be used interchangeably. May be used for compatibility with ksh or other POSIX complaint shell; however, set of option available may differ.</p>

<h2>questions</h2>

<p>Questions and answers regarding declare in bash.</p>

<h3>why declare?</h3>

<p>Typing. Declare allows you to apply or take away attributes to variables in bash similar to how types or assigned in statically typed programming languages. For example, you may want to make it so a variable may not be reassigned a new value. This can be accomplished using the bash builtin command declare. </p>

<h3>declare or typeset?</h3>

<p>Either is fine. However, I personally don't use typeset. Although it doesn't hurt to know what it is at least or in case you have to migrate to ksh for some reason.</p>

<h3>do I need declare to assign a value to a variable?</h3>

<p>No. For most cases, you do not need declare to assign values to variable. However, there may be site effects of declaring variable attributes after assignment. In that case, it would be advantageous to declare attributes before or on assignment in a single statement assigning value to a variable. </p>

<h3>why would I declare a variable without value in bash?</h3>

<p>You may declare a variable without a value to communicate that a variable may be modified from this point on or to unset a variable via assignment.</p>

<p>It is not necessary to declare a variable for the purpose of initialization if no assignment was made prior to appearance in script.</p>

<hr />
<!--.w3-container--></div>
<!--.w3-card--></div>
<!--.w3-col--></div>
<div class="w3-col l4">
<div class="w3-card-2 w3-margin w3-margin-top w3-white">
<div class="w3-container">
<div class="w3-bar w3-white">
<a href="index.html" class="w3-bar-item w3-button w3-mobile">index</a>
<a href="bash-using-declare.html" class="w3-bar-item w3-button w3-mobile">bash-using-declare</a>
</div> 
<!--.w3-container--></div>
<!--.w3-card--></div>
<!--.w3-col--></div>
<!--.w3-row--></div>
<!-- Grid end -->
<!-- .w3-content --></div>
<footer class="w3-container w3-dark-grey w3-padding-32 w3-margin-top">
<p>&copy; 2017-2019 <a href="https://temptemp3.github.io/">temptemp3.github.io</a><br>
Built with <a href="https://github.com/temptemp3/sh2/blob/180702/u2.sh">u2.sh</a> Default theme and a lot of coffee</p>
<!--button class="w3-button w3-black w3-disabled w3-padding-large w3-margin-bottom">Previous</button>
<button class="w3-button w3-black w3-padding-large w3-margin-bottom">Next</button-->
<!--mute in global fields -->
<!--p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank" rel="nofollow">w3.css</a></p-->
</footer>
</body>
</html>
