<!DOCTYPE html>
<html>
<head>
<meta charset="US-ASCII">
<meta name="author" content="temptemp3">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/w3.css">
<title>git-how-to-migrate-standalone-bash-program-to-package-based-program</title>
<style>
h4 {
 margin-left: 16px;
}
body { 
  font-size: 16px; /* base font size */
  line-height: 1.2em ;
 
}
.small {
  font-size: 12px; /* 75% of the baseline */
}
.large {
  font-size: 20px; /* 125% of the baseline */
}
div#header ul li { /* header navigation */
 display: inline ;
}
</style>
</head>
<body>
<div id="header">
<ul>
<li><a href="index.html">index</a></li>
<li><a href="git-how-to-migrate-standalone-bash-program-to-package-based-program.html">git-how-to-migrate-standalone-bash-program-to-package-based-program</a></li>
<li><a href="how-to-setup-github-pages-for-user.html">how-to-setup-github-pages-for-user</a></li>
</ul> 
</div>
<h1>git how to migrate standalone bash program to package based program</h1>
<p>git-how-to-migrate-standalone-bash-program-to-package-based-program</p>

<!--
[git how to migrate standalone bash program to package based program](git-how-to-migrate-standalone-bash-program-to-package-based-program.html)
-->

<hr />

<h2>introduction</h2>

<p>This document walks through the process of creating a package-based bash program by migrating a standalone bash program from one bash script repository to another including the source repository as a branched submodule.</p>

<h2>motivation</h2>

<p>As time progresses and the need for new solutions present themselves, the likelihood of introducing non-reusable domain-specific code increases. To optimize code reusability domain-specific code is kept outside of the package, while allowing reusable code to be added to the package for potential use in other package-based programs.</p>

<h2>workflow</h2>

<ol>
<li><p>create new respository for package</p>

<ul>
<li>"create new repository for" <a href="https://github.com/temptemp3/sh2-u2">sh2-u2</a> # create "shu" pronounced "shoe"</li>
</ul></li>
<li><p>add repository of which standalone program belongs to as submodule</p>

<ul>
<li>git submodule add https://github.com/temptemp3/<a href="https://github.com/temptemp3/sh2">sh2.git</a></li>
</ul></li>
<li><p>create entry to standalone program <pre><code>
# in sh2-u2 #
$ ${SH2}/create-stub2.sh main | tee main.sh
<samp>
#!/bin/bash
## main
## =stub=
## version 0.0.0 - stub
exit 0
##################################################
main() {
true
}
##################################################
if [ ${#} -eq 0 ]
then
true
else
exit 1 # wrong args
fi
##################################################
main
##################################################
</samp>
vim main.sh # adapt stub to use standalone version of program #
cat main.sh 
<samp>
#!/bin/bash
## main
## - main entry
## version 0.0.1 - initial
##################################################
u2() { $( dirname ${0} )/sh2/u2.sh ${@} ; }
##################################################
main() {
u2 ${args}
}
##################################################
if [ ! ]
then
args=${@}
else
exit 1 # wrong args
fi
##################################################
main
##################################################
</samp>
</code></pre></p></li>
<li><p>now what? (list of things to do that may come next)</p>

<ul>
<li>commit changes, initial commit</li>
<li>create .gitignore file
<ul>
<li>ignore swp files</li>
</ul></li>
<li>create new branch in submodule and commit changes if any</li>
<li>let <em>coding</em> take its course</li>
</ul></li>
</ol>

<hr />
<div id="footer">
<ul>
<li><a href="index.html">index</a></li>
<li><a href="git-how-to-migrate-standalone-bash-program-to-package-based-program.html">git-how-to-migrate-standalone-bash-program-to-package-based-program</a></li>
<li><a href="how-to-setup-github-pages-for-user.html">how-to-setup-github-pages-for-user</a></li>
</ul>
</div>
</body>
</html>
