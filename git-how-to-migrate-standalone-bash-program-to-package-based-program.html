<!DOCTYPE html>
<html>
<head>
<meta charset="US-ASCII">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<style>
body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}
</style>
<title>git how to migrate standalone bash program to package based program | temptemp3.github.io</title>
</head>
<body class="w3-light-grey">
<div class="w3-content" style="max-width:1400px">

<!-- Header -->
<header class="w3-container w3-center w3-padding-32"> 
<h1><b><a href="https://temptemp3.github.io/">tempt2<sup>3</sup></a></b></h1>
<p>Welcome to the blog of <span class="w3-tag"><a style="text-decoration:none;" href="https://github.com/temptemp3">temptemp3</a></span></p>
</header>

<!-- begin Grid -->
<div class="w3-row">

<div class="w3-col l8 s12">
<div class="w3-card-4 w3-margin w3-white">
<div class="w3-container">
<h1>git how to migrate standalone bash program to package based program</h1>
<!--
[git how to migrate standalone bash program to package based program](git-how-to-migrate-standalone-bash-program-to-package-based-program.html)
-->

<hr />

<h2>introduction</h2>

<p>This document walks through the process of creating a package-based bash program by migrating a standalone bash program from one bash script repository to another including the source repository as a branched submodule.</p>

<h2>motivation</h2>

<p>As time progresses and the need for new solutions present themselves, the likelihood of introducing non-reusable domain-specific code increases. To optimize code reusability domain-specific code is kept outside of the package, while allowing reusable code to be added to the package for potential use in other package-based programs.</p>

<h2>workflow</h2>

<ol>
<li><p>create new respository for package</p>

<ul>
<li>"create new repository for" <a href="https://github.com/temptemp3/sh2-u2">sh2-u2</a> # create "shu" pronounced "shoe"</li>
</ul></li>
<li><p>add repository of which standalone program belongs to as submodule</p>

<ul>
<li>git submodule add https://github.com/temptemp3/<a href="https://github.com/temptemp3/sh2">sh2.git</a></li>
</ul></li>
<li><p>create entry to standalone program <pre><code>
# in sh2-u2 #
$ ${SH2}/create-stub2.sh main | tee main.sh
<samp>
#!/bin/bash
## main
## =stub=
## version 0.0.0 - stub
exit 0
##################################################
main() {
true
}
##################################################
if [ ${#} -eq 0 ]
then
true
else
exit 1 # wrong args
fi
##################################################
main
##################################################
</samp>
vim main.sh # adapt stub to use standalone version of program #
cat main.sh 
<samp>
#!/bin/bash
## main
## - main entry
## version 0.0.1 - initial
##################################################
u2() { $( dirname ${0} )/sh2/u2.sh ${@} ; }
##################################################
main() {
u2 ${args}
}
##################################################
if [ ! ]
then
args=${@}
else
exit 1 # wrong args
fi
##################################################
main
##################################################
</samp>
</code></pre></p></li>
<li><p>now what? (list of things to do that may come next)</p>

<ul>
<li>commit changes, initial commit</li>
<li>create .gitignore file
<ul>
<li>ignore swp files</li>
</ul></li>
<li>create new branch in submodule and commit changes if any</li>
<li>let <em>coding</em> take its course</li>
</ul></li>
</ol>

<hr />
<!--.w3-container--></div>
<!--.w3-card--></div>
<!--.w3-col--></div>

<div class="w3-col l4">
<div class="w3-card-2 w3-margin w3-margin-top w3-white">
<div class="w3-container">
<ul><li><a href="index.html">top</a></li></ul>
<ul> <li><a href="aws-autoscaling-enable-metrics-collection-for-asg.html">aws-autoscaling-enable-metrics-collection-for-asg</a></li> <li><a href="bash-using-declare.html">bash-using-declare</a></li> <li><a href="css-w3-modals.html">css-w3-modals</a></li> <li><a href="git-how-to-migrate-standalone-bash-program-to-package-based-program.html">git-how-to-migrate-standalone-bash-program-to-package-based-program</a></li> <li><a href="hello-world.html">hello-world</a></li> <li><a href="how-to-setup-github-pages-for-user.html">how-to-setup-github-pages-for-user</a></li> <li><a href="seo-optimal-title-length.html">seo-optimal-title-length</a></li> <li><a href="seo-pinging-crawlers.html">seo-pinging-crawlers</a></li> </ul> 
<!--.w3-container--></div>
<!--.w3-card--></div>
<!--.w3-col--></div>

<!--.w3-row--></div>
<!-- Grid end -->

<!-- .w3-content --></div>

<footer class="w3-container w3-dark-grey w3-padding-32 w3-margin-top">
&copy; 2017 <a href="https://temptemp3.github.io/">temptemp3.github.io</a>
<!--button class="w3-button w3-black w3-disabled w3-padding-large w3-margin-bottom">Previous</button>
<button class="w3-button w3-black w3-padding-large w3-margin-bottom">Next</button-->
</footer>

</body>
</html>
